# OpenTelemetry 配置示例
# 类似 golang 版本的 opentelemetry.yaml

open_telemetry:
  enabled: true

  # ========== Tracer 配置 ==========
  tracer:
    enabled: true
    exporter_type: "otlp"  # none, stdout, otlp
    sample_ratio: 1.0      # 采样率（0.0-1.0）
    batch_timeout: "5s"    # 批量导出超时
    otlp:
      endpoint: "localhost:4317"
      protocol: "grpc"     # grpc, http
      compression: false
      insecure: true
      timeout: "10s"
      headers:
        # Authorization: "Bearer xxx"

  # ========== Metric 配置（全局 MeterProvider） ==========
  metric:
    enabled: true
    exporter_type: "prometheus"  # none, stdout, otlp, prometheus
    collect_interval: "60s"

    # Prometheus 配置
    prometheus:
      url: "/metrics"
      namespace: ""

    # OTLP 配置（当 exporter_type 为 otlp 时）
    otlp:
      endpoint: "localhost:4317"
      protocol: "grpc"
      compression: false
      insecure: true
      timeout: "10s"
      temporality: "cumulative"  # cumulative, delta

  # ========== App MeterProvider 配置（业务指标） ==========
  app_meter_provider:
    enabled: true
    exporter_type: "otlp"
    collect_interval: "30s"
    otlp:
      endpoint: "prometheus.tencentcloudapi.com:4317"
      protocol: "grpc"
      compression: true
      insecure: false
      timeout: "10s"
      temporality: "delta"  # 智研平台要求 delta

  # ========== Resource 配置 ==========
  resource:
    service_name: "my-service"
    service_version: "1.0.0"
    service_namespace: "production"
    deployment_environment: "prod"
    apm_token: ""  # 腾讯云 APM Token

    # K8s 配置
    k8s:
      enabled: true  # 自动从环境变量读取 K8s 属性

    # 智研平台配置
    zhiyan:
      app_mark: ""
      global_app_mark: ""
      env: ""

    # 自定义属性
    attributes:
      team: "platform"
      region: "us-west"
