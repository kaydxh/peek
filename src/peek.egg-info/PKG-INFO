Metadata-Version: 2.4
Name: peek
Version: 0.0.1
Summary: Python Base Libraries - A collection of utilities for Python development
Home-page: https://github.com/kaydxh/peek.git
Author: kaydxh
Author-email: kaydxh <kaydxh@example.com>
License: MIT
Project-URL: Homepage, https://github.com/kaydxh/peek
Project-URL: Documentation, https://github.com/kaydxh/peek#readme
Project-URL: Repository, https://github.com/kaydxh/peek.git
Project-URL: Issues, https://github.com/kaydxh/peek/issues
Keywords: utilities,webserver,grpc,http,networking
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Software Development :: Libraries
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: >=3.8
Description-Content-Type: text/markdown
Requires-Dist: requests>=2.28.0
Requires-Dist: retrying>=1.3.4
Requires-Dist: fastapi>=0.100.0
Requires-Dist: uvicorn[standard]>=0.23.0
Requires-Dist: pydantic>=2.0.0
Requires-Dist: pydantic-settings>=2.0.0
Requires-Dist: PyYAML>=6.0
Requires-Dist: httpx>=0.24.0
Requires-Dist: pytz>=2023.3
Provides-Extra: dev
Requires-Dist: pytest>=7.4.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.21.0; extra == "dev"
Requires-Dist: pytest-cov>=4.1.0; extra == "dev"
Requires-Dist: black>=23.7.0; extra == "dev"
Requires-Dist: isort>=5.12.0; extra == "dev"
Requires-Dist: mypy>=1.5.0; extra == "dev"
Requires-Dist: flake8>=6.1.0; extra == "dev"
Requires-Dist: pylint>=2.17.0; extra == "dev"
Requires-Dist: sphinx>=7.0.0; extra == "dev"
Requires-Dist: sphinx-rtd-theme>=1.3.0; extra == "dev"
Provides-Extra: prod
Requires-Dist: opentelemetry-api>=1.20.0; extra == "prod"
Requires-Dist: opentelemetry-sdk>=1.20.0; extra == "prod"
Requires-Dist: opentelemetry-instrumentation-fastapi>=0.41b0; extra == "prod"
Requires-Dist: opentelemetry-exporter-otlp>=1.20.0; extra == "prod"
Requires-Dist: opentelemetry-semantic-conventions>=0.41b0; extra == "prod"
Requires-Dist: grpcio>=1.57.0; extra == "prod"
Requires-Dist: grpcio-tools>=1.57.0; extra == "prod"
Requires-Dist: grpcio-health-checking>=1.57.0; extra == "prod"
Requires-Dist: grpcio-reflection>=1.57.0; extra == "prod"
Requires-Dist: gunicorn>=21.0.0; extra == "prod"
Provides-Extra: all
Requires-Dist: peek[dev]; extra == "all"
Requires-Dist: peek[prod]; extra == "all"
Dynamic: author
Dynamic: home-page
Dynamic: requires-python

# peek

Python Base Libraries - A collection of utilities for Python development.

## 安装

```bash
# 基础安装
pip install -e .

# 开发模式（含测试、格式化工具）
pip install -e .[dev]

# 生产模式（含 OpenTelemetry、gRPC）
pip install -e .[prod]

# 全部依赖
pip install -e .[all]
```

## 项目结构

```
peek/
├── src/
│   └── peek/                # 主包
│       ├── ai/              # AI/GPU 工具
│       ├── cv/              # 计算机视觉
│       ├── encoding/        # 编码工具
│       ├── git/             # Git 操作
│       ├── net/             # 网络模块
│       │   ├── http.py      # HTTP 客户端
│       │   ├── ip.py        # IP 工具
│       │   ├── webserver/   # Web 服务器框架
│       │   └── grpc/        # gRPC 服务
│       ├── os/              # 系统工具
│       ├── time/            # 时间工具
│       └── uuid/            # UUID 生成
├── tests/                   # 测试
│   ├── unit/               # 单元测试
│   └── integration/        # 集成测试
├── examples/               # 示例代码
├── docs/                   # 文档
├── requirements/           # 分环境依赖
│   ├── base.txt
│   ├── dev.txt
│   └── prod.txt
└── scripts/                # 辅助脚本
```

## 使用示例

### HTTP 客户端

```python
from peek.net import http

# 发送 GET 请求
response = http.do_http_get("https://api.example.com/data")

# 发送 POST 请求
response = http.do_http_post("https://api.example.com/data", json={"key": "value"})
```

### Web 服务器

```python
from peek.net.webserver import GenericWebServer, WebHandler

class MyHandler(WebHandler):
    def set_routes(self, app):
        @app.get("/hello")
        async def hello():
            return {"message": "Hello, World!"}

server = GenericWebServer(host="0.0.0.0", port=8080)
server.install_web_handler(MyHandler())
server.run()
```

### gRPC 服务

```python
from peek.net.webserver import GenericWebServer
from peek.net.grpc import create_default_interceptor_chain

# 同时支持 HTTP 和 gRPC
server = GenericWebServer(
    host="0.0.0.0",
    port=8080,        # HTTP 端口
    grpc_port=50051,  # gRPC 端口
)

# 添加 gRPC 拦截器
server.add_grpc_interceptors(create_default_interceptor_chain())

# 注册 gRPC 服务
server.register_grpc_service(
    lambda s: my_pb2_grpc.add_MyServiceServicer_to_server(MyServicer(), s),
    service_name="my.service.MyService"
)

server.run()
```

## 开发

```bash
# 格式化代码
./scripts/format.sh

# 代码检查
./scripts/lint.sh

# 运行测试
./scripts/test.sh

# 运行特定测试
pytest tests/unit/test_http.py -v
```

## License

MIT License
